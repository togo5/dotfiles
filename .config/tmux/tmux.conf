# truecolor (24-bit) を有効化
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm*:Tc"

# マウス操作を有効化
set -g mouse on

# ペインタイトル表示
set -g pane-border-status top
set -g pane-border-format " #{pane_title} "

# ==============================================================================
# Zellij 互換キーバインド (Alt ベース)
# ==============================================================================

# --- グローバル Alt ショートカット (モード不要) ---
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R
bind -n M-n split-window -c "#{pane_current_path}"
bind -n M-q kill-session

# --- Pane モード (Alt + p) ---
bind -n M-p switch-client -T pane_mode
bind -T pane_mode d split-window -v -c "#{pane_current_path}"
bind -T pane_mode r split-window -h -c "#{pane_current_path}"
bind -T pane_mode x kill-pane
bind -T pane_mode f resize-pane -Z
bind -T pane_mode n split-window -c "#{pane_current_path}"
bind -T pane_mode w display-popup
bind -T pane_mode h select-pane -L
bind -T pane_mode j select-pane -D
bind -T pane_mode k select-pane -U
bind -T pane_mode l select-pane -R
bind -T pane_mode p select-pane -t :.+

# --- Tab モード (Alt + t) ---
bind -n M-t switch-client -T tab_mode
bind -T tab_mode n new-window
bind -T tab_mode x kill-window
bind -T tab_mode h previous-window
bind -T tab_mode k previous-window
bind -T tab_mode l next-window
bind -T tab_mode j next-window
bind -T tab_mode r command-prompt -I "#W" "rename-window '%%'"
bind -T tab_mode 1 select-window -t :1
bind -T tab_mode 2 select-window -t :2
bind -T tab_mode 3 select-window -t :3
bind -T tab_mode 4 select-window -t :4
bind -T tab_mode 5 select-window -t :5
bind -T tab_mode 6 select-window -t :6
bind -T tab_mode 7 select-window -t :7
bind -T tab_mode 8 select-window -t :8
bind -T tab_mode 9 select-window -t :9
bind -T tab_mode Tab last-window

# --- Resize モード (Alt + r) ---
bind -n M-r switch-client -T resize_mode
bind -T resize_mode h resize-pane -L 2 \; switch-client -T resize_mode
bind -T resize_mode j resize-pane -D 2 \; switch-client -T resize_mode
bind -T resize_mode k resize-pane -U 2 \; switch-client -T resize_mode
bind -T resize_mode l resize-pane -R 2 \; switch-client -T resize_mode
bind -T resize_mode H resize-pane -R 2 \; switch-client -T resize_mode
bind -T resize_mode J resize-pane -U 2 \; switch-client -T resize_mode
bind -T resize_mode K resize-pane -D 2 \; switch-client -T resize_mode
bind -T resize_mode L resize-pane -L 2 \; switch-client -T resize_mode
bind -T resize_mode Enter switch-client -T root
bind -T resize_mode Escape switch-client -T root

# --- Move モード (Alt + m) ---
bind -n M-m switch-client -T move_mode
bind -T move_mode h swap-pane -s '{left-of}' \; switch-client -T move_mode
bind -T move_mode j swap-pane -s '{down-of}' \; switch-client -T move_mode
bind -T move_mode k swap-pane -s '{up-of}' \; switch-client -T move_mode
bind -T move_mode l swap-pane -s '{right-of}' \; switch-client -T move_mode
bind -T move_mode n swap-pane -D \; switch-client -T move_mode
bind -T move_mode Tab swap-pane -D \; switch-client -T move_mode
bind -T move_mode p swap-pane -U \; switch-client -T move_mode
bind -T move_mode Enter switch-client -T root
bind -T move_mode Escape switch-client -T root

# --- Session モード (Alt + o) ---
bind -n M-o switch-client -T session_mode
bind -T session_mode d detach-client
bind -T session_mode w choose-tree -s
